(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function r(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(t){if(t.ep)return;t.ep=!0;const s=r(t);fetch(t.href,s)}})();typeof globalThis.requestIdleCallback>"u"&&(globalThis.requestIdleCallback=function(e){const n=Date.now();return setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,16-(Date.now()-n))}})},0)},globalThis.cancelIdleCallback=function(e){clearTimeout(e)});async function R(e,{max:n=10,retryTime:r=2,timeout:i=1e4,onSingleTaskDone:t}={}){const s=e.length;if(s===0)return Promise.resolve([]);const{ready:l,resolve:c}=x(),h=[];let u=0,a=0;const f=d=>{const{ready:b,resolve:m}=x(),p=setTimeout(()=>{m({success:!1,result:null})},i);let w=0;const y=g=>{w++,d().then(O=>{clearTimeout(p),m({success:!0,result:O})}).catch(()=>{w<r?y(g):g()})};return y(()=>{clearTimeout(p),m({success:!1,result:null})}),b},T=async()=>{const d=e[u],b=u;u++;const m=Date.now(),p=await f(d),w=p.success;let y=p.result;const g=t==null?void 0:t({success:w,result:y,index:b});if(g){const{abort:I,data:A}=g;if(I===!1){c([]);return}A&&(y=A)}const O=Date.now()-m;if(h[b]={start:m,result:y,elapse:O,success:w},a++,a===s){c(h);return}u>=s||T()},v=Math.min(n,s);for(let d=0;d<v;d++)T();return l}function P(e,n){const r=e.length;if(r===0)return Promise.resolve([]);const{ready:i,resolve:t}=x(),s=[];let l=0,c=0;const h=(u=0)=>{let a=Date.now();for(;u>0;){const f=e[c]();n==null||n(f,c),c++;const T=Date.now(),v=T-a;if(s.push({result:f,elapse:v,start:a,round:l}),c>=r){t(s);return}a=T,u-=v}globalThis.requestIdleCallback(f=>{h(f.timeRemaining())}),l++};return h(),i}function x(){let e=()=>{},n=()=>{};return{ready:new Promise((i,t)=>{e=i,n=t}),resolve:e,reject:n}}function D(e){return e<=1?e:D(e-1)+D(e-2)}function C(){const{ready:e,resolve:n}=x(),r=Math.round(Math.random()*10);return setTimeout(()=>{n(r)},r),e}function o(e){return document.getElementById(e)}o("startTasks").onclick=()=>{const e=Date.now();o("result").innerText="2000 Tasks is Running...",P([...new Array(2e3).fill(()=>D(25))]).then(n=>{o("result").innerText=`2000 Tasks done in ${Date.now()-e}ms. Open DevTool to view Details`,console.log(n)})};o("startAsyncTasks").onclick=()=>{const e=Date.now();o("result").innerText="2000 Async Tasks is Running...",R([...new Array(2e3).fill(()=>C())],100).then(n=>{o("result").innerText=`2000 Async Tasks done in ${Date.now()-e}ms. Open DevTool to view Details`,console.log(n)})};o("startTasks2").onclick=()=>{const e=Date.now();o("result").innerText="2000 Tasks is Running...",console.log([...new Array(2e3).fill(()=>D(25))].map(n=>n())),o("result").innerText=`2000 Tasks done in ${Date.now()-e}ms. Open DevTool to view Details`};
